#!/bin/bash
# Ultra-simple Docker remote enabler - one-liner friendly
set -e; echo "? Enabling Docker remote access..."; sudo mkdir -p /etc/docker; echo '{"hosts":["unix:///var/run/docker.sock","tcp://0.0.0.0:2375"]}' | sudo tee /etc/docker/daemon.json > /dev/null; if command -v systemctl >/dev/null 2>&1; then sudo mkdir -p /etc/systemd/system/docker.service.d; echo -e '[Service]\nExecStart=\nExecStart=/usr/bin/dockerd' | sudo tee /etc/systemd/system/docker.service.d/override.conf > /dev/null; sudo systemctl daemon-reload; sudo systemctl restart docker; elif command -v rc-service >/dev/null 2>&1; then sudo rc-service docker restart; else sudo service docker restart; fi; sleep 3; if netstat -tlnp 2>/dev/null | grep -q ":2375"; then LOCAL_IP=$(hostname -I | awk '{print $1}' 2>/dev/null || echo "localhost"); echo "? Success! Docker API: http://$LOCAL_IP:2375"; else echo "? Failed - check Docker logs"; exit 1; fi
